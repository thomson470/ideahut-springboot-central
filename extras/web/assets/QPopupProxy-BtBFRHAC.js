import{c as M,by as Dt,bz as Nt,l as dt,bc as _t,v as bt,y as wt,bA as xt,r as z,aH as Et,w as se,S as it,h as v,p as Ce,E as kt,g as ct,bB as St,a6 as te,aZ as Bt,aC as Pt,C as Zt,aE as Qt,am as zt}from"./index-DR8vcSVV.js";import{u as Lt}from"./QTabPanels-D42-P5uE.js";import{p as C}from"./format-B2bnFOAj.js";import{T as Rt}from"./TouchPan-D6T6wx6r.js";import{d as Kt}from"./QSelect-DRrcuyuj.js";import{u as Xt,d as Jt}from"./QTooltip-yDWh9haU.js";const de=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Wt(e,l,h){return Object.prototype.toString.call(e)==="[object Date]"&&(h=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),tn(ft(e,l,h))}function ht(e,l,h){return Yt(en(e,l,h))}function Ut(e){return Gt(e)===0}function We(e,l){return l<=6?31:l<=11||Ut(e)?30:29}function Gt(e){const l=de.length;let h=de[0],d,f,o,b,s;if(e<h||e>=de[l-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<l&&(d=de[s],f=d-h,!(e<d));s+=1)h=d;return b=e-h,f-b<6&&(b=b-f+j(f+4,33)*33),o=J(J(b+1,33)-1,4),o===-1&&(o=4),o}function qt(e,l){const h=de.length,d=e+621;let f=-14,o=de[0],b,s,D,V,g;if(e<o||e>=de[h-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<h&&(b=de[g],s=b-o,!(e<b));g+=1)f=f+j(s,33)*8+j(J(s,33),4),o=b;V=e-o,f=f+j(V,33)*8+j(J(V,33)+3,4),J(s,33)===4&&s-V===4&&(f+=1);const w=j(d,4)-j((j(d,100)+1)*3,4)-150,B=20+f-w;return l||(s-V<6&&(V=V-s+j(s+4,33)*33),D=J(J(V+1,33)-1,4),D===-1&&(D=4)),{leap:D,gy:d,march:B}}function en(e,l,h){const d=qt(e,!0);return ft(d.gy,3,d.march)+(l-1)*31-j(l,7)*(l-7)+h-1}function tn(e){const l=Yt(e).gy;let h=l-621,d,f,o;const b=qt(h,!1),s=ft(l,3,b.march);if(o=e-s,o>=0){if(o<=185)return f=1+j(o,31),d=J(o,31)+1,{jy:h,jm:f,jd:d};o-=186}else h-=1,o+=179,b.leap===1&&(o+=1);return f=7+j(o,30),d=J(o,30)+1,{jy:h,jm:f,jd:d}}function ft(e,l,h){let d=j((e+j(l-8,6)+100100)*1461,4)+j(153*J(l+9,12)+2,5)+h-34840408;return d=d-j(j(e+100100+j(l-8,6),100)*3,4)+752,d}function Yt(e){let l=4*e+139361631;l=l+j(j(4*e+183187720,146097)*3,4)*4-3908;const h=j(J(l,1461),4)*5+308,d=j(J(h,153),5)+1,f=J(j(h,153),12)+1;return{gy:j(l,1461)-100100+j(8-f,6),gm:f,gd:d}}function j(e,l){return~~(e/l)}function J(e,l){return e-~~(e/l)*l}const nn=["gregorian","persian"],Ue={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>nn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ct=["update:modelValue"];function ue(e){return e.year+"/"+C(e.month)+"/"+C(e.day)}function Ht(e,l){const h=M(()=>e.disable!==!0&&e.readonly!==!0),d=M(()=>h.value===!0?0:-1),f=M(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function o(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function b(s){const D=new Date,V=s===!0?null:0;if(e.calendar==="persian"){const g=Wt(D);return{year:g.jy,month:g.jm,day:g.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:V,minute:V,second:V,millisecond:V}}return{editable:h,tabindex:d,headerClass:f,getLocale:o,getCurrentDate:b}}const Ot=864e5,an=36e5,st=6e4,It="YYYY-MM-DDTHH:mm:ss.SSSZ",un=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ln=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ut={};function rn(e,l){const h="("+l.days.join("|")+")",d=e+h;if(ut[d]!==void 0)return ut[d];const f="("+l.daysShort.join("|")+")",o="("+l.months.join("|")+")",b="("+l.monthsShort.join("|")+")",s={};let D=0;const V=e.replace(ln,w=>{switch(D++,w){case"YY":return s.YY=D,"(-?\\d{1,2})";case"YYYY":return s.YYYY=D,"(-?\\d{1,4})";case"M":return s.M=D,"(\\d{1,2})";case"Mo":return s.M=D++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return s.M=D,"(\\d{2})";case"MMM":return s.MMM=D,b;case"MMMM":return s.MMMM=D,o;case"D":return s.D=D,"(\\d{1,2})";case"Do":return s.D=D++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=D,"(\\d{2})";case"H":return s.H=D,"(\\d{1,2})";case"HH":return s.H=D,"(\\d{2})";case"h":return s.h=D,"(\\d{1,2})";case"hh":return s.h=D,"(\\d{2})";case"m":return s.m=D,"(\\d{1,2})";case"mm":return s.m=D,"(\\d{2})";case"s":return s.s=D,"(\\d{1,2})";case"ss":return s.s=D,"(\\d{2})";case"S":return s.S=D,"(\\d{1})";case"SS":return s.S=D,"(\\d{2})";case"SSS":return s.S=D,"(\\d{3})";case"A":return s.A=D,"(AM|PM)";case"a":return s.a=D,"(am|pm)";case"aa":return s.aa=D,"(a\\.m\\.|p\\.m\\.)";case"ddd":return f;case"dddd":return h;case"Q":case"d":case"E":return"(\\d{1})";case"do":return D++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return D++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return D++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return s.Z=D,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=D,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=D,"(-?\\d+)";case"x":return s.x=D,"(-?\\d{4,})";default:return D--,w[0]==="["&&(w=w.substring(1,w.length-1)),w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:s,regex:new RegExp("^"+V)};return ut[d]=g,g}function Vt(e,l){return e!==void 0?e:l!==void 0?l.date:Nt.date}function gt(e,l=""){const h=e>0?"-":"+",d=Math.abs(e),f=Math.floor(d/60),o=d%60;return h+C(f)+l+C(o)}function Ee(e,l,h,d,f){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(f!==void 0&&Object.assign(o,f),e==null||e===""||typeof e!="string")return o;l===void 0&&(l=It);const b=Vt(h,Dt.props),s=b.months,D=b.monthsShort,{regex:V,map:g}=rn(l,b),w=e.match(V);if(w===null)return o;let B="";if(g.X!==void 0||g.x!==void 0){const N=parseInt(w[g.X!==void 0?g.X:g.x],10);if(isNaN(N)===!0||N<0)return o;const P=new Date(N*(g.X!==void 0?1e3:1));o.year=P.getFullYear(),o.month=P.getMonth()+1,o.day=P.getDate(),o.hour=P.getHours(),o.minute=P.getMinutes(),o.second=P.getSeconds(),o.millisecond=P.getMilliseconds()}else{if(g.YYYY!==void 0)o.year=parseInt(w[g.YYYY],10);else if(g.YY!==void 0){const N=parseInt(w[g.YY],10);o.year=N<0?N:2e3+N}if(g.M!==void 0){if(o.month=parseInt(w[g.M],10),o.month<1||o.month>12)return o}else g.MMM!==void 0?o.month=D.indexOf(w[g.MMM])+1:g.MMMM!==void 0&&(o.month=s.indexOf(w[g.MMMM])+1);if(g.D!==void 0){if(o.day=parseInt(w[g.D],10),o.year===null||o.month===null||o.day<1)return o;const N=d!=="persian"?new Date(o.year,o.month,0).getDate():We(o.year,o.month);if(o.day>N)return o}g.H!==void 0?o.hour=parseInt(w[g.H],10)%24:g.h!==void 0&&(o.hour=parseInt(w[g.h],10)%12,(g.A&&w[g.A]==="PM"||g.a&&w[g.a]==="pm"||g.aa&&w[g.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),g.m!==void 0&&(o.minute=parseInt(w[g.m],10)%60),g.s!==void 0&&(o.second=parseInt(w[g.s],10)%60),g.S!==void 0&&(o.millisecond=parseInt(w[g.S],10)*10**(3-w[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(B=g.Z!==void 0?w[g.Z].replace(":",""):w[g.ZZ],o.timezoneOffset=(B[0]==="+"?-1:1)*(60*B.slice(1,3)+1*B.slice(3,5)))}return o.dateHash=C(o.year,6)+"/"+C(o.month)+"/"+C(o.day),o.timeHash=C(o.hour)+":"+C(o.minute)+":"+C(o.second)+B,o}function lt(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const h=new Date(l.getFullYear(),0,4);h.setDate(h.getDate()-(h.getDay()+6)%7+3);const d=l.getTimezoneOffset()-h.getTimezoneOffset();l.setHours(l.getHours()-d);const f=(l-h)/(Ot*7);return 1+Math.floor(f)}function le(e,l,h){const d=new Date(e),f=`set${h===!0?"UTC":""}`;switch(l){case"year":case"years":d[`${f}Month`](0);case"month":case"months":d[`${f}Date`](1);case"day":case"days":case"date":d[`${f}Hours`](0);case"hour":case"hours":d[`${f}Minutes`](0);case"minute":case"minutes":d[`${f}Seconds`](0);case"second":case"seconds":d[`${f}Milliseconds`](0)}return d}function Je(e,l,h){return(e.getTime()-e.getTimezoneOffset()*st-(l.getTime()-l.getTimezoneOffset()*st))/h}function Tt(e,l,h="days"){const d=new Date(e),f=new Date(l);switch(h){case"years":case"year":return d.getFullYear()-f.getFullYear();case"months":case"month":return(d.getFullYear()-f.getFullYear())*12+d.getMonth()-f.getMonth();case"days":case"day":case"date":return Je(le(d,"day"),le(f,"day"),Ot);case"hours":case"hour":return Je(le(d,"hour"),le(f,"hour"),an);case"minutes":case"minute":return Je(le(d,"minute"),le(f,"minute"),st);case"seconds":case"second":return Je(le(d,"second"),le(f,"second"),1e3)}}function rt(e){return Tt(e,le(e,"year"),"days")+1}function qe(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const yt={YY(e,l,h){const d=this.YYYY(e,l,h)%100;return d>=0?C(d):"-"+C(Math.abs(d))},YYYY(e,l,h){return h??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return qe(e.getMonth()+1)},MM(e){return C(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return qe(this.Q(e))},D(e){return e.getDate()},Do(e){return qe(e.getDate())},DD(e){return C(e.getDate())},DDD(e){return rt(e)},DDDo(e){return qe(rt(e))},DDDD(e){return C(rt(e),3)},d(e){return e.getDay()},do(e){return qe(e.getDay())},dd(e,l){return l.days[e.getDay()].slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return lt(e)},wo(e){return qe(lt(e))},ww(e){return C(lt(e))},H(e){return e.getHours()},HH(e){return C(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return C(this.h(e))},m(e){return e.getMinutes()},mm(e){return C(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return C(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return C(Math.floor(e.getMilliseconds()/10))},SSS(e){return C(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,l,h,d){const f=d??e.getTimezoneOffset();return gt(f,":")},ZZ(e,l,h,d){const f=d??e.getTimezoneOffset();return gt(f)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function jt(e,l,h,d,f){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;l===void 0&&(l=It);const b=Vt(h,Dt.props);return l.replace(un,(s,D)=>s in yt?yt[s](o,b,d,f):D===void 0?s:D.split("\\]").join("]"))}const ge=20,on=["Calendar","Years","Months"],Mt=e=>on.includes(e),ot=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ye=" — ";function ie(e){return e.year+"/"+C(e.month)}const yn=dt({name:"QDate",props:{...Ue,..._t,...bt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Ue.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ot},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ot},navigationMaxYearMonth:{type:String,validator:ot},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...Ct,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:h}){const{proxy:d}=ct(),{$q:f}=d,o=wt(e,f),{getCache:b}=Lt(),{tabindex:s,headerClass:D,getLocale:V,getCurrentDate:g}=Ht(e,f);let w;const B=xt(e),N=St(B),P=z(null),O=z(Ke()),I=z(V()),Be=M(()=>Ke()),ye=M(()=>V()),x=M(()=>g()),r=z(u(O.value,I.value)),H=z(e.defaultView),Pe=M(()=>f.lang.rtl===!0?"right":"left"),re=z(Pe.value),Z=z(Pe.value),He=r.value.year,ce=z(He-He%ge-(He<0?ge:0)),Q=z(null),fe=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),W=M(()=>e.color||"primary"),U=M(()=>e.textColor||"white"),L=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ne=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),E=M(()=>ne.value.filter(t=>typeof t=="string").map(t=>pe(t,O.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),G=M(()=>{const t=n=>pe(n,O.value,I.value);return ne.value.filter(n=>Et(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),Me=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=ht(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Oe=M(()=>e.calendar==="persian"?ue:(t,n,a)=>jt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?O.value:n,a===void 0?I.value:a,t.year,t.timezoneOffset)),oe=M(()=>E.value.length+G.value.reduce((t,n)=>t+1+Tt(Me.value(n.to),Me.value(n.from)),0)),ve=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Q.value!==null){const a=Q.value.init,c=Me.value(a);return I.value.daysShort[c.getDay()]+", "+I.value.monthsShort[a.month-1]+" "+a.day+Ye+"?"}if(oe.value===0)return Ye;if(oe.value>1)return`${oe.value} ${I.value.pluralDay}`;const t=E.value[0],n=Me.value(t);return isNaN(n.valueOf())===!0?Ye:I.value.headerTitle!==void 0?I.value.headerTitle(n,t):I.value.daysShort[n.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),Ze=M(()=>E.value.concat(G.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),Ie=M(()=>E.value.concat(G.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),Qe=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(oe.value===0)return Ye;if(oe.value>1){const t=Ze.value,n=Ie.value,a=I.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Ye+a[n.month-1]+" ":t.month!==n.month?Ye+a[n.month-1]:"")+" "+n.year}return E.value[0].year}),De=M(()=>{const t=[f.iconSet.datetime.arrowLeft,f.iconSet.datetime.arrowRight];return f.lang.rtl===!0?t.reverse():t}),_e=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),Ve=M(()=>{const t=I.value.daysShort,n=_e.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),ee=M(()=>{const t=r.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():We(t.year,t.month)}),ze=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),F=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),p=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Te=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return F.value!==null&&F.value.year>=r.value.year&&(t.year.prev=!1,F.value.year===r.value.year&&F.value.month>=r.value.month&&(t.month.prev=!1)),p.value!==null&&p.value.year<=r.value.year&&(t.year.next=!1,p.value.year===r.value.year&&p.value.month<=r.value.month&&(t.month.next=!1)),t}),be=M(()=>{const t={};return E.value.forEach(n=>{const a=ie(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),Le=M(()=>{const t={};return G.value.forEach(n=>{const a=ie(n.from),c=ie(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===c?n.to.day:void 0,range:n}),a<c){let m;const{year:S,month:y}=n.from,k=y<12?{year:S,month:y+1}:{year:S+1,month:1};for(;(m=ie(k))<=c;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===c?n.to.day:void 0,range:n}),k.month++,k.month>12&&(k.year++,k.month=1)}}),t}),me=M(()=>{if(Q.value===null)return;const{init:t,initHash:n,final:a,finalHash:c}=Q.value,[m,S]=n<=c?[t,a]:[a,t],y=ie(m),k=ie(S);if(y!==R.value&&k!==R.value)return;const T={};return y===R.value?(T.from=m.day,T.includeFrom=!0):T.from=1,k===R.value?(T.to=S.day,T.includeTo=!0):T.to=ee.value,T}),R=M(()=>ie(r.value)),Ge=M(()=>{const t={};if(e.options===void 0){for(let a=1;a<=ee.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=ee.value;a++){const c=R.value+"/"+C(a);t[a]=n(c)}return t}),et=M(()=>{const t={};if(e.events===void 0)for(let n=1;n<=ee.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=ee.value;a++){const c=R.value+"/"+C(a);t[a]=n(c)===!0&&ze.value(c)}}return t}),we=M(()=>{let t,n;const{year:a,month:c}=r.value;if(e.calendar!=="persian")t=new Date(a,c-1,1),n=new Date(a,c-1,0).getDate();else{const m=ht(a,c,1);t=new Date(m.gy,m.gm-1,m.gd);let S=c-1,y=a;S===0&&(S=12,y--),n=We(y,S)}return{days:t.getDay()-_e.value-1,endDay:n}}),he=M(()=>{const t=[],{days:n,endDay:a}=we.value,c=n<0?n+7:n;if(c<6)for(let y=a-c;y<=a;y++)t.push({i:y,fill:!0});const m=t.length;for(let y=1;y<=ee.value;y++){const k={i:y,event:et.value[y],classes:[]};Ge.value[y]===!0&&(k.in=!0,k.flat=!0),t.push(k)}if(be.value[R.value]!==void 0&&be.value[R.value].forEach(y=>{const k=m+y-1;Object.assign(t[k],{selected:!0,unelevated:!0,flat:!1,color:W.value,textColor:U.value})}),Le.value[R.value]!==void 0&&Le.value[R.value].forEach(y=>{if(y.from!==void 0){const k=m+y.from-1,T=m+(y.to||ee.value)-1;for(let Ne=k;Ne<=T;Ne++)Object.assign(t[Ne],{range:y.range,unelevated:!0,color:W.value,textColor:U.value});Object.assign(t[k],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[T],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const k=m+y.to-1;for(let T=m;T<=k;T++)Object.assign(t[T],{range:y.range,unelevated:!0,color:W.value,textColor:U.value});Object.assign(t[k],{flat:!1,rangeTo:!0})}else{const k=m+ee.value-1;for(let T=m;T<=k;T++)Object.assign(t[T],{range:y.range,unelevated:!0,color:W.value,textColor:U.value})}}),me.value!==void 0){const y=m+me.value.from-1,k=m+me.value.to-1;for(let T=y;T<=k;T++)t[T].color=W.value,t[T].editRange=!0;me.value.includeFrom===!0&&(t[y].editRangeFrom=!0),me.value.includeTo===!0&&(t[k].editRangeTo=!0)}r.value.year===x.value.year&&r.value.month===x.value.month&&(t[m+x.value.day-1].today=!0);const S=t.length%7;if(S>0){const y=7-S;for(let k=1;k<=y;k++)t.push({i:k,fill:!0})}return t.forEach(y=>{let k="q-date__calendar-item ";y.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(k+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(k+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(k+=` text-${y.color}`)),y.classes=k}),t}),xe=M(()=>e.disable===!0?{"aria-disabled":"true"}:{});se(()=>e.modelValue,t=>{if(w===JSON.stringify(t))w=0;else{const n=u(O.value,I.value);K(n.year,n.month,n)}}),se(H,()=>{P.value!==null&&d.$el.contains(document.activeElement)===!0&&P.value.focus()}),se(()=>r.value.year+"|"+r.value.month,()=>{h("navigation",{year:r.value.year,month:r.value.month})}),se(Be,t=>{mt(t,I.value,"mask"),O.value=t}),se(ye,t=>{mt(O.value,t,"locale"),I.value=t});function je(t){w=JSON.stringify(t)}function $e(){const{year:t,month:n,day:a}=x.value,c={...r.value,year:t,month:n,day:a},m=be.value[ie(c)];(m===void 0||m.includes(c.day)===!1)&&tt(c),ae(c.year,c.month)}function Re(t){Mt(t)===!0&&(H.value=t)}function Ae(t,n){["month","year"].includes(t)&&(t==="month"?_:q)(n===!0?-1:1)}function ae(t,n){H.value="Calendar",K(t,n)}function Fe(t,n){if(e.range===!1||!t){Q.value=null;return}const a=Object.assign({...r.value},t),c=n!==void 0?Object.assign({...r.value},n):a;Q.value={init:a,initHash:ue(a),final:c,finalHash:ue(c)},ae(a.year,a.month)}function Ke(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function pe(t,n,a){return Ee(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function u(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return i();const c=a[a.length-1],m=pe(c.from!==void 0?c.from:c,t,n);return m.dateHash===null?i():m}function i(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=x.value!==void 0?x.value:g();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+C(n)+"/01"}}function _(t){let n=r.value.year,a=Number(r.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),K(n,a),L.value===!0&&ke("month")}function q(t){const n=Number(r.value.year)+t;K(n,r.value.month),L.value===!0&&ke("year")}function $(t){K(t,r.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",L.value===!0&&ke("year")}function X(t){K(r.value.year,t),H.value="Calendar",L.value===!0&&ke("month")}function Y(t,n){const a=be.value[n];(a!==void 0&&a.includes(t.day)===!0?nt:tt)(t)}function A(t){return{year:t.year,month:t.month,day:t.day}}function K(t,n,a){if(F.value!==null&&t<=F.value.year&&((n<F.value.month||t<F.value.year)&&(n=F.value.month),t=F.value.year),p.value!==null&&t>=p.value.year&&((n>p.value.month||t>p.value.year)&&(n=p.value.month),t=p.value.year),a!==void 0){const{hour:m,minute:S,second:y,millisecond:k,timezoneOffset:T,timeHash:Ne}=a;Object.assign(r.value,{hour:m,minute:S,second:y,millisecond:k,timezoneOffset:T,timeHash:Ne})}const c=t+"/"+C(n)+"/01";c!==r.value.dateHash&&(re.value=r.value.dateHash<c==(f.lang.rtl!==!0)?"left":"right",t!==r.value.year&&(Z.value=re.value),it(()=>{ce.value=t-t%ge-(t<0?ge:0),Object.assign(r.value,{year:t,month:n,day:1,dateHash:c})}))}function Xe(t,n,a){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:m,details:S}=vt(n,a);je(c),h("update:modelValue",c,m,S)}function ke(t){const n=E.value[0]!==void 0&&E.value[0].dateHash!==null?{...E.value[0]}:{...r.value};it(()=>{n.year=r.value.year,n.month=r.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():We(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const c=Se(n),{details:m}=vt("",n);je(c),h("update:modelValue",c,t,m)})}function vt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...A(n.target),from:A(n.from),to:A(n.to)}}:{reason:`${t}-day`,details:A(n)}}function Se(t,n,a){return t.from!==void 0?{from:Oe.value(t.from,n,a),to:Oe.value(t.to,n,a)}:Oe.value(t,n,a)}function tt(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=ue(t.from),c=ue(t.to),m=E.value.filter(y=>y.dateHash<a||y.dateHash>c),S=G.value.filter(({from:y,to:k})=>k.dateHash<a||y.dateHash>c);n=m.concat(S).concat(t).map(y=>Se(y))}else{const a=ne.value.slice();a.push(Se(t)),n=a}else n=Se(t);Xe(n,"add",t)}function nt(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=Se(t);t.from!==void 0?n=e.modelValue.filter(c=>c.from!==void 0?c.from!==a.from&&c.to!==a.to:!0):n=e.modelValue.filter(c=>c!==a),n.length===0&&(n=null)}Xe(n,"remove",t)}function mt(t,n,a){const c=E.value.concat(G.value).map(S=>Se(S,t,n)).filter(S=>S.from!==void 0?S.from.dateHash!==null&&S.to.dateHash!==null:S.dateHash!==null),m=(e.multiple===!0?c:c[0])||null;je(m),h("update:modelValue",m,a)}function $t(){if(e.minimal!==!0)return v("div",{class:"q-date__header "+D.value},[v("div",{class:"relative-position"},[v(Ce,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+Qe.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...b("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[Qe.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(Ce,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+ve.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...b("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[ve.value]))]),e.todayBtn===!0?v(te,{class:"q-date__header-today self-start",icon:f.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:$e}):null])])}function at({label:t,type:n,key:a,dir:c,goTo:m,boundaries:S,cls:y}){return[v("div",{class:"row items-center q-date__arrow"},[v(te,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[0],tabindex:s.value,disable:S.prev===!1,...b("go-#"+n,{onClick(){m(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+y},[v(Ce,{name:"q-transition--jump-"+c},()=>v("div",{key:a},[v(te,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,...b("view#"+n,{onClick:()=>{H.value=n}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v(te,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[1],tabindex:s.value,disable:S.next===!1,...b("go+#"+n,{onClick(){m(1)}})})])]}const At={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},at({label:I.value.months[r.value.month-1],type:"Months",key:r.value.month,dir:re.value,goTo:_,boundaries:Te.value.month,cls:" col"}).concat(at({label:r.value.year,type:"Years",key:r.value.year,dir:Z.value,goTo:q,boundaries:Te.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ve.value.map(t=>v("div",{class:"q-date__calendar-item"},[v("div",t)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(Ce,{name:"q-transition--slide-"+re.value},()=>v("div",{key:R.value,class:"q-date__calendar-days fit"},he.value.map(t=>v("div",{class:t.classes},[t.in===!0?v(te,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,...b("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{pt(t.i)}})},t.event!==!1?()=>v("div",{class:"q-date__event bg-"+t.event}):null):v("div",""+t.i)]))))])])],Months(){const t=r.value.year===x.value.year,n=c=>F.value!==null&&r.value.year===F.value.year&&F.value.month>c||p.value!==null&&r.value.year===p.value.year&&p.value.month<c,a=I.value.monthsShort.map((c,m)=>{const S=r.value.month===m+1;return v("div",{class:"q-date__months-item flex flex-center"},[v(te,{class:t===!0&&x.value.month===m+1?"q-date__today":null,flat:S!==!0,label:c,unelevated:S,color:S===!0?W.value:null,textColor:S===!0?U.value:null,tabindex:s.value,disable:n(m+1),...b("month#"+m,{onClick:()=>{X(m+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(v("div",{class:"row no-wrap full-width"},[at({label:r.value.year,type:"Years",key:r.value.year,dir:Z.value,goTo:q,boundaries:Te.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=ce.value,n=t+ge,a=[],c=m=>F.value!==null&&F.value.year>m||p.value!==null&&p.value.year<m;for(let m=t;m<=n;m++){const S=r.value.year===m;a.push(v("div",{class:"q-date__years-item flex flex-center"},[v(te,{key:"yr"+m,class:x.value.year===m?"q-date__today":null,flat:!S,label:m,dense:!0,unelevated:S,color:S===!0?W.value:null,textColor:S===!0?U.value:null,tabindex:s.value,disable:c(m),...b("yr#"+m,{onClick:()=>{$(m)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v(te,{round:!0,dense:!0,flat:!0,icon:De.value[0],tabindex:s.value,disable:c(t),...b("y-",{onClick:()=>{ce.value-=ge}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},a),v("div",{class:"col-auto"},[v(te,{round:!0,dense:!0,flat:!0,icon:De.value[1],tabindex:s.value,disable:c(n),...b("y+",{onClick:()=>{ce.value+=ge}})})])])}};function Ft(t){const n={...r.value,day:t};if(e.range===!1){Y(n,R.value);return}if(Q.value===null){const a=he.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&a.range!==void 0){nt({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){nt(n);return}const c=ue(n);Q.value={init:n,initHash:c,final:n,finalHash:c},h("rangeStart",A(n))}else{const a=Q.value.initHash,c=ue(n),m=a<=c?{from:Q.value.init,to:n}:{from:n,to:Q.value.init};Q.value=null,tt(a===c?n:{target:n,...m}),h("rangeEnd",{from:A(m.from),to:A(m.to)})}}function pt(t){if(Q.value!==null){const n={...r.value,day:t};Object.assign(Q.value,{final:n,finalHash:ue(n)})}}return Object.assign(d,{setToday:$e,setView:Re,offsetCalendar:Ae,setCalendarTo:ae,setEditingRange:Fe}),()=>{const t=[v("div",{class:"q-date__content col relative-position"},[v(Ce,{name:"q-transition--fade"},At[H.value])])],n=kt(l.default);return n!==void 0&&t.push(v("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&N(t,"push"),v("div",{class:fe.value,...xe.value},[$t(),v("div",{ref:P,class:"q-date__main col column",tabindex:-1},t)])}}});function sn(e,l){return e.hour!==null&&e.minute===null?"minute":"hour"}function dn(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Mn=dt({name:"QTime",props:{...bt,..._t,...Ue,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...Ue.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ct,setup(e,{slots:l,emit:h}){const d=ct(),{$q:f}=d.proxy,o=wt(e,f),{tabindex:b,headerClass:s,getLocale:D,getCurrentDate:V}=Ht(e,f),g=xt(e),w=St(g);let B,N;const P=z(null),O=M(()=>Qe()),I=M(()=>D()),Be=M(()=>De()),ye=Ee(e.modelValue,O.value,I.value,e.calendar,Be.value),x=z(sn(ye)),r=z(ye),H=z(ye.hour===null||ye.hour<12),Pe=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(o.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),re=M(()=>{const u=r.value;return{hour:u.hour===null?"--":Z.value===!0?C(u.hour):String(H.value===!0?u.hour===0?12:u.hour:u.hour>12?u.hour-12:u.hour),minute:u.minute===null?"--":C(u.minute),second:u.second===null?"--":C(u.second)}}),Z=M(()=>e.format24h!==null?e.format24h:f.lang.date.format24h),He=M(()=>{const u=x.value==="hour",i=u===!0?12:60,_=r.value[x.value];let $=`rotate(${Math.round(_*(360/i))-180}deg) translateX(-50%)`;return u===!0&&Z.value===!0&&r.value.hour>=12&&($+=" scale(.7)"),{transform:$}}),ce=M(()=>r.value.hour!==null),Q=M(()=>ce.value===!0&&r.value.minute!==null),fe=M(()=>e.hourOptions!==void 0?u=>e.hourOptions.includes(u):e.options!==void 0?u=>e.options(u,null,null):null),W=M(()=>e.minuteOptions!==void 0?u=>e.minuteOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,u,null):null),U=M(()=>e.secondOptions!==void 0?u=>e.secondOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,r.value.minute,u):null),L=M(()=>{if(fe.value===null)return null;const u=ve(0,11,fe.value),i=ve(12,11,fe.value);return{am:u,pm:i,values:u.values.concat(i.values)}}),ne=M(()=>W.value!==null?ve(0,59,W.value):null),E=M(()=>U.value!==null?ve(0,59,U.value):null),G=M(()=>{switch(x.value){case"hour":return L.value;case"minute":return ne.value;case"second":return E.value}}),Me=M(()=>{let u,i,_=0,q=1;const $=G.value!==null?G.value.values:void 0;x.value==="hour"?Z.value===!0?(u=0,i=23):(u=0,i=11,H.value===!1&&(_=12)):(u=0,i=55,q=5);const X=[];for(let Y=u,A=u;Y<=i;Y+=q,A++){const K=Y+_,Xe=$!==void 0&&$.includes(K)===!1,ke=x.value==="hour"&&Y===0?Z.value===!0?"00":"12":Y;X.push({val:K,index:A,disable:Xe,label:ke})}return X}),Oe=M(()=>[[Rt,ee,void 0,{stop:!0,prevent:!0,mouse:!0}]]);se(()=>e.modelValue,u=>{const i=Ee(u,O.value,I.value,e.calendar,Be.value);(i.dateHash!==r.value.dateHash||i.timeHash!==r.value.timeHash)&&(r.value=i,i.hour===null?x.value="hour":H.value=i.hour<12)}),se([O,I],()=>{it(()=>{Fe()})});function oe(){const u={...V(),...dn()};Fe(u),Object.assign(r.value,u),x.value="hour"}function ve(u,i,_){const q=Array.apply(null,{length:i+1}).map(($,X)=>{const Y=X+u;return{index:Y,val:_(Y)===!0}}).filter($=>$.val===!0).map($=>$.index);return{min:q[0],max:q[q.length-1],values:q,threshold:i+1}}function Ze(u,i,_){const q=Math.abs(u-i);return Math.min(q,_-q)}function Ie(u,{min:i,max:_,values:q,threshold:$}){if(u===i)return i;if(u<i||u>_)return Ze(u,i,$)<=Ze(u,_,$)?i:_;const X=q.findIndex(K=>u<=K),Y=q[X-1],A=q[X];return u-Y<=A-u?Y:A}function Qe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function De(){if(typeof e.defaultDate!="string"){const u=V(!0);return u.dateHash=ue(u),u}return Ee(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function _e(){return Pt(d)===!0||G.value!==null&&(G.value.values.length===0||x.value==="hour"&&Z.value!==!0&&L.value[H.value===!0?"am":"pm"].values.length===0)}function Ve(){const u=P.value,{top:i,left:_,width:q}=u.getBoundingClientRect(),$=q/2;return{top:i+$,left:_+$,dist:$*.7}}function ee(u){if(_e()!==!0){if(u.isFirst===!0){B=Ve(),N=F(u.evt,B);return}N=F(u.evt,B,N),u.isFinal===!0&&(B=!1,N=null,ze())}}function ze(){x.value==="hour"?x.value="minute":e.withSeconds&&x.value==="minute"&&(x.value="second")}function F(u,i,_){const q=Bt(u),$=Math.abs(q.top-i.top),X=Math.sqrt(Math.pow(Math.abs(q.top-i.top),2)+Math.pow(Math.abs(q.left-i.left),2));let Y,A=Math.asin($/X)*(180/Math.PI);if(q.top<i.top?A=i.left<q.left?90-A:270+A:A=i.left<q.left?A+90:270-A,x.value==="hour"){if(Y=A/30,L.value!==null){const K=Z.value!==!0?H.value===!0:L.value.am.values.length!==0&&L.value.pm.values.length!==0?X>=i.dist:L.value.am.values.length!==0;Y=Ie(Y+(K===!0?0:12),L.value[K===!0?"am":"pm"])}else Y=Math.round(Y),Z.value===!0?X<i.dist?Y<12&&(Y+=12):Y===12&&(Y=0):H.value===!0&&Y===12?Y=0:H.value===!1&&Y!==12&&(Y+=12);Z.value===!0&&(H.value=Y<12)}else Y=Math.round(A/6)%60,x.value==="minute"&&ne.value!==null?Y=Ie(Y,ne.value):x.value==="second"&&E.value!==null&&(Y=Ie(Y,E.value));return _!==Y&&je[x.value](Y),Y}const p={hour(){x.value="hour"},minute(){x.value="minute"},second(){x.value="second"}};function Te(u){u.keyCode===13&&$e()}function be(u){u.keyCode===13&&Re()}function Le(u){_e()!==!0&&(f.platform.is.desktop!==!0&&F(u,Ve()),ze())}function me(u){_e()!==!0&&F(u,Ve())}function R(u){if(u.keyCode===13)x.value="hour";else if([37,39].includes(u.keyCode)){const i=u.keyCode===37?-1:1;if(L.value!==null){const _=Z.value===!0?L.value.values:L.value[H.value===!0?"am":"pm"].values;if(_.length===0)return;if(r.value.hour===null)we(_[0]);else{const q=(_.length+_.indexOf(r.value.hour)+i)%_.length;we(_[q])}}else{const _=Z.value===!0?24:12,q=Z.value!==!0&&H.value===!1?12:0,$=r.value.hour===null?-i:r.value.hour;we(q+(24+$+i)%_)}}}function Ge(u){if(u.keyCode===13)x.value="minute";else if([37,39].includes(u.keyCode)){const i=u.keyCode===37?-1:1;if(ne.value!==null){const _=ne.value.values;if(_.length===0)return;if(r.value.minute===null)he(_[0]);else{const q=(_.length+_.indexOf(r.value.minute)+i)%_.length;he(_[q])}}else{const _=r.value.minute===null?-i:r.value.minute;he((60+_+i)%60)}}}function et(u){if(u.keyCode===13)x.value="second";else if([37,39].includes(u.keyCode)){const i=u.keyCode===37?-1:1;if(E.value!==null){const _=E.value.values;if(_.length===0)return;if(r.value.seconds===null)xe(_[0]);else{const q=(_.length+_.indexOf(r.value.second)+i)%_.length;xe(_[q])}}else{const _=r.value.second===null?-i:r.value.second;xe((60+_+i)%60)}}}function we(u){r.value.hour!==u&&(r.value.hour=u,ae())}function he(u){r.value.minute!==u&&(r.value.minute=u,ae())}function xe(u){r.value.second!==u&&(r.value.second=u,ae())}const je={hour:we,minute:he,second:xe};function $e(){H.value===!1&&(H.value=!0,r.value.hour!==null&&(r.value.hour-=12,ae()))}function Re(){H.value===!0&&(H.value=!1,r.value.hour!==null&&(r.value.hour+=12,ae()))}function Ae(u){const i=e.modelValue;x.value!==u&&i!==void 0&&i!==null&&i!==""&&typeof i!="string"&&(x.value=u)}function ae(){if(fe.value!==null&&fe.value(r.value.hour)!==!0){r.value=Ee(),Ae("hour");return}if(W.value!==null&&W.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,Ae("minute");return}if(e.withSeconds===!0&&U.value!==null&&U.value(r.value.second)!==!0){r.value.second=null,Ae("second");return}r.value.hour===null||r.value.minute===null||e.withSeconds===!0&&r.value.second===null||Fe()}function Fe(u){const i=Object.assign({...r.value},u),_=e.calendar==="persian"?C(i.hour)+":"+C(i.minute)+(e.withSeconds===!0?":"+C(i.second):""):jt(new Date(i.year,i.month===null?null:i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),O.value,I.value,i.year,i.timezoneOffset);i.changed=_!==e.modelValue,h("update:modelValue",_,i)}function Ke(){const u=[v("div",{class:"q-time__link "+(x.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:p.hour,onKeyup:R},re.value.hour),v("div",":"),v("div",ce.value===!0?{class:"q-time__link "+(x.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:Ge,onClick:p.minute}:{class:"q-time__link"},re.value.minute)];e.withSeconds===!0&&u.push(v("div",":"),v("div",Q.value===!0?{class:"q-time__link "+(x.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:et,onClick:p.second}:{class:"q-time__link"},re.value.second));const i=[v("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},u)];return Z.value===!1&&i.push(v("div",{class:"q-time__header-ampm column items-between no-wrap"},[v("div",{class:"q-time__link "+(H.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:$e,onKeyup:Te},"AM"),v("div",{class:"q-time__link "+(H.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:Re,onKeyup:be},"PM")])),v("div",{class:"q-time__header flex flex-center no-wrap "+s.value},i)}function pe(){const u=r.value[x.value];return v("div",{class:"q-time__content col relative-position"},[v(Ce,{name:"q-transition--scale"},()=>v("div",{key:"clock"+x.value,class:"q-time__container-parent absolute-full"},[v("div",{ref:P,class:"q-time__container-child fit overflow-hidden"},[Zt(v("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Le,onMousedown:me},[v("div",{class:"q-time__clock-circle fit"},[v("div",{class:"q-time__clock-pointer"+(r.value[x.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:He.value}),Me.value.map(i=>v("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${i.index}`+(i.val===u?" q-time__clock-position--active "+s.value:i.disable===!0?" q-time__clock-position--disable":"")},[v("span",i.label)]))])]),Oe.value)])])),e.nowBtn===!0?v(te,{class:"q-time__now-button absolute",icon:f.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:b.value,onClick:oe}):null])}return d.proxy.setNow=oe,()=>{const u=[pe()],i=kt(l.default);return i!==void 0&&u.push(v("div",{class:"q-time__actions"},i)),e.name!==void 0&&e.disable!==!0&&w(u,"push"),v("div",{class:Pe.value,tabindex:-1},[Ke(),v("div",{class:"q-time__main col overflow-auto"},u)])}}}),Dn=dt({name:"QPopupProxy",props:{...Xt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:h,attrs:d}){const{proxy:f}=ct(),{$q:o}=f,b=z(!1),s=z(null),D=M(()=>parseInt(e.breakpoint,10)),{canShow:V}=Jt({showing:b});function g(){return o.screen.width<D.value||o.screen.height<D.value?"dialog":"menu"}const w=z(g()),B=M(()=>w.value==="menu"?{maxHeight:"99vh"}:{});se(()=>g(),O=>{b.value!==!0&&(w.value=O)});function N(O){b.value=!0,h("show",O)}function P(O){b.value=!1,w.value=g(),h("hide",O)}return Object.assign(f,{show(O){V(O)===!0&&s.value.show(O)},hide(O){s.value.hide(O)},toggle(O){s.value.toggle(O)}}),Qt(f,"currentComponent",()=>({type:w.value,ref:s.value})),()=>{const O={ref:s,...B.value,...d,onShow:N,onHide:P};let I;return w.value==="dialog"?I=zt:(I=Kt,Object.assign(O,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),v(I,O,l.default)}}});export{Dn as Q,yn as a,Mn as b};
