import{_ as h,Z as r,a0 as m,r as i,$ as w,a1 as c,ac as b,ae as k,f as l,a5 as t,a6 as x,a4 as V,ak as f,G as _}from"./index-C3Shutt2.js";import{Q as g}from"./QForm-C5bfKRGS.js";let n;const q={setup(){return{util:r,uix:m,username:i(null),password:i(null),is_show_login:i(!1),is_in_progress:i(!1),is_show_password:i(!1)}},created(){n=this},methods:{on_login_click(){let a=n.username;if(!(a&&a.length>0))return m.error("error.required","label.username"),!1;let s=n.password;if(!(s&&s.length>0))return m.error("error.required","label.password"),!1;n.is_in_progress=!0,w.call({path:"/login",method:"post",params:{username:a,password:s},onFinish(){n.is_in_progress=!1},onSuccess(o,e){if(o=r.isObject(o)?o:{},e=r.isObject(e)?e:{},r.isString(o.authorization)){let u=c.auth();u.token=o.authorization,c.auth(u)}r.isObject(o.account)&&c.user(o.account),r.isObject(e.config)&&c.config(e.config),n.$router.push({path:"/"})}})}}},y={class:"flex flex-center q-mt-xl"},S={class:"login-form text-center"};function v(a,s,o,e,u,p){return V(),b("div",y,[k("div",S,[l(g,{class:"q-mt-lg",onSubmit:p.on_login_click},{default:t(()=>[l(f,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=d=>e.username=d),class:"q-mb-md",type:"text",placeholder:a.$t("label.username"),rounded:"",outlined:""},{prepend:t(()=>[l(_,{name:"account_box"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["onSubmit"]),l(g,{onSubmit:p.on_login_click},{default:t(()=>[l(f,{modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=d=>e.password=d),class:"q-mb-md",type:e.is_show_password?"text":"password",placeholder:a.$t("label.password"),rounded:"",outlined:""},{prepend:t(()=>[l(_,{name:"lock"})]),append:t(()=>[l(_,{name:e.is_show_password?"visibility":"visibility_off",onClick:s[1]||(s[1]=d=>e.is_show_password=!e.is_show_password)},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["onSubmit"]),l(x,{"no-caps":"",ripple:"",color:"primary",onClick:p.on_login_click,loading:e.is_in_progress,label:a.$t("label.login")},null,8,["onClick","loading","label"])])])}const B=h(q,[["render",v]]);export{B as default};
