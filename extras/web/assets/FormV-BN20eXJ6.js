import{Q,b as g,a as k}from"./format-B2bnFOAj.js";import{Q as P}from"./QTooltip-yDWh9haU.js";import{_ as V,Y as C,r as h,a0 as I,Z as y,a4 as o,a2 as f,a5 as l,C as _,an as v,ab as q,f as d,a7 as w,a8 as x,a6 as B,ae as D,ac as b,F,ad as S,ak as j,ao as T}from"./index-DR8vcSVV.js";import{C as A}from"./ClosePopup-Dm8m1oe-.js";import{T as N}from"./TouchPan-D6T6wx6r.js";import{g as m}from"./Index-DZCMW3KU.js";import"./QSpace-KGtmaO9N.js";import"./QSelect-DRrcuyuj.js";import"./QList-B4LjA0mH.js";import"./QInnerLoading-aglVToLV.js";import"./QTable-Bq8EQDGx.js";let i;const L={props:["parameters"],setup(){return{APP:C,title:h(null),fields:h([]),dialog:h(I.dialog.init(()=>i.dialog))}},created(){i=this;let r=m.get.object(i.parameters),p=m.get.object(r.template),n=m.get.object(r.form),a=m.get.object(r.data);i.title=n.title,i.fields=[];let u=!1,s;for(const e of n.fields){let t=y.getFieldValue(e.name,a);if(!u&&n.id.fields.includes(e.name)&&(u=!0),y.isFunction(e.format))t=e.format(t,a);else if(e.type==="enum"){try{s=p.enums[e.enum].find(c=>c.value===t).label}catch{s=t}t=s}else if(e.type==="option"){try{s=p.options[e.option].find(c=>c.value===t).label}catch{s=t}t=s}i.fields.push({type:e.type,label:e.label,value:t})}if(!u){let e=m.id.toPk(n.id,a);y.isDefined(e)&&e!==null&&i.fields.splice(0,0,{label:"ID",value:e})}}},U={class:"row"},z={key:0,class:"text-h6 text-center text-bold"};function E(r,p,n,a,u,s){return o(),f(T,{style:q("width: "+(r.$q.screen.lt.md?"100%;":"50%;")+a.dialog.style)},{default:l(()=>[_((o(),f(v,{class:"q-pa-none header-main",style:q(a.APP?.color?.header?"background: "+a.APP.color.header+" !important;":"")},{default:l(()=>[d(Q,{class:"q-pr-none"},{default:l(()=>[d(g,null,{default:l(()=>[d(k,{class:"text-h6 text-white"},{default:l(()=>[w(x(a.title),1)]),_:1})]),_:1}),d(g,{side:""},{default:l(()=>[_((o(),f(B,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close"},{default:l(()=>[d(P,null,{default:l(()=>[w(x(r.$t("label.close")),1)]),_:1})]),_:1})),[[A]])]),_:1})]),_:1})]),_:1},8,["style"])),[[N,a.dialog.onDrag,void 0,{mouse:!0}]]),d(v,{style:{"max-height":"80vh"},class:"q-pa-xs q-mt-xs scroll"},{default:l(()=>[D("div",U,[(o(!0),b(F,null,S(a.fields,(e,t)=>(o(),b("div",{key:t,class:"col-md-6 col-sm-12 q-mb-xs",style:{width:"100%"}},[e.type==="title"?(o(),b("div",z,x(e.label),1)):(o(),f(j,{key:1,type:"text",label:e.label,modelValue:e.value,"onUpdate:modelValue":c=>e.value=c,readonly:"",filled:"",autogrow:"",class:"q-mb-xs",style:{"max-height":"200px",overflow:"scroll"}},null,8,["label","modelValue","onUpdate:modelValue"]))]))),128))])]),_:1})]),_:1},8,["style"])}const $=V(L,[["render",E]]);export{$ as default};
