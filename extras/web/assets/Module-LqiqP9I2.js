import{Q as x}from"./QTooltip-DjcLDuxo.js";import{_ as z,Z as m,$ as w,r as c,a4 as r,a2 as u,a5 as i,f as l,an as g,ao as y,C as q,a6 as j,a7 as b,a8 as d,ac as f,G as h,ae as n,ak as C,a9 as A,F as I,ad as N}from"./index-CZ6M6r4H.js";import{Q as k}from"./QImg-JGCniVbE.js";import{Q as Y}from"./QSelect-C94E7tUG.js";import{Q as D}from"./QForm-CC1IWNRa.js";import{_ as Q,Q as S}from"./Project-bnJyclvf.js";import{C as U}from"./ClosePopup-ClacVTk0.js";import"./format-0B3yNPe0.js";import"./TouchPan-DwFn1rMB.js";let o;const B={props:["parameters"],setup(){return{util:m,api:w,initialized:c(!1),project:c({}),page:c({value:1,size:18,min:1,max:3}),order:c("name"),search:c(null),modules:c([]),loading:c(!1),sorts:c([{label:"Name (Asc)",value:"name"},{label:"Name (Desc)",value:"-name"},{label:"Date (Asc)",value:"createdOn"},{label:"Date (Desc)",value:"-createdOn"}])}},created(){o=this;let a=m.isObject(o.parameters)?o.parameters:{};o.project=m.isObject(a.project)?a.project:{},o.get_modules()},methods:{get_modules(){o.loading=!0,w.call({path:"/modules",method:"post",params:{projectId:o.project.projectId,index:o.page.value,size:o.page.size,order:o.order,search:o.search},onFinish(){o.loading=!1,o.initialized=!0},onSuccess(a){let t=1,p=1,e=[];m.isObject(a)&&(m.isNumber(a.index)&&(t=a.index-1,t<1&&(t=1)),p=t+2,e=m.isArray(a.data)?a.data:[],e.length<o.page.size&&(p=o.page.value));let v=o.page;v.min=t,v.max=p,o.modules=e}})},on_update_page(a){o.page.value=a,o.get_modules()},on_sort_update(a){o.order=a,o.get_modules()},on_open_page(a){let t=new URL(window.location.href),p=t.protocol+"//"+t.hostname+(t.port!==80&&t.port!==443?":"+t.port:"")+m.webPath()+"/redirect?projectId="+o.project.projectId+"&moduleId="+a.moduleId;window.open(p,"_blank")}}},O={key:0,class:"col-3"},F={class:"text-caption"},P={class:"text-h5"},L={class:"text-body2 text-grey"},T={class:"row q-pa-none justify-end"},W={key:0},E={class:"flex flex-center"},G={class:"login-form text-center"},M={class:"text-h6"},R={key:1,class:"row q-pa-xs",style:{"max-height":"58vh","overflow-y":"scroll"}},Z={class:"row no-wrap items-center"},H={class:"col text-caption q-pt-md"},J={class:"text-subtitle1"},K={class:"text-caption text-grey ellipsis-text lines4"};function X(a,t,p,e,v,_){return r(),u(y,null,{default:i(()=>[l(g,{class:"q-pa-xs"},{default:i(()=>[l(y,null,{default:i(()=>[q((r(),u(j,{class:"absolute",flat:"",round:"",glossy:"",icon:"close",color:"red",style:{top:"0px",right:"0px","z-index":"99"}},{default:i(()=>[l(x,null,{default:i(()=>[b(d(a.$t("label.close")),1)]),_:1})]),_:1})),[[U]]),l(g,{horizontal:""},{default:i(()=>[e.project.icon&&e.project.icon.startsWith("icon:")?(r(),f("div",O,[l(h,{name:e.project.icon.substring(5),size:"200px",style:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},null,8,["name"])])):(r(),u(k,{key:1,class:"col-3",src:e.api.multimedia(e.project.icon),height:"200px",fit:"contain",style:{"margin-top":"5px","margin-bottom":"5px"}},{error:i(()=>t[3]||(t[3]=[n("img",{src:Q,style:{width:"100%",height:"200px","margin-top":"5px","margin-bottom":"5px","object-fit":"contain"},alt:""},null,-1)])),_:1},8,["src"])),l(g,null,{default:i(()=>[n("div",F,[l(h,{name:"radio_button_checked",color:e.project.isActive==="Y"?"positive":"negative"},null,8,["color"]),b(" "+d(e.project.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),n("div",P,d(e.project.name),1),n("div",L,d(e.project.description),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{class:"q-pa-xs"},{default:i(()=>[n("div",T,[l(Y,{modelValue:e.order,"onUpdate:modelValue":[t[0]||(t[0]=s=>e.order=s),_.on_sort_update],label:a.$t("label.sort"),options:e.sorts,disable:e.loading,"option-value":"value","option-label":"label",borderless:"",dense:"","emit-value":"","map-options":"",class:"q-mr-sm"},null,8,["modelValue","label","options","disable","onUpdate:modelValue"]),l(D,{onSubmit:_.get_modules,class:"q-mr-sm"},{default:i(()=>[l(C,{modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=s=>e.search=s),label:a.$t("label.search"),disable:e.loading,outlined:"",dense:"",clearable:""},{append:i(()=>[l(j,{round:"",dense:"",glossy:"",icon:"search",onClick:_.get_modules},{default:i(()=>[l(x,null,{default:i(()=>[b(d(a.$t("label.search")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","label","disable"])]),_:1},8,["onSubmit"]),e.modules.length===e.page.size||e.page.value>1?(r(),u(S,{key:0,modelValue:e.page.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>e.page.value=s),_.on_update_page],"icon-prev":"arrow_back_ios","icon-next":"arrow_forward_ios","direction-links":"",min:e.page.min,max:e.page.max,disable:e.loading},null,8,["modelValue","min","max","disable","onUpdate:modelValue"])):A("",!0)]),e.initialized&&!e.modules?.length?(r(),f("div",W,[n("div",E,[n("div",G,[l(h,{name:"mood_bad",color:"deep-orange-11",size:"200px"}),n("div",M,d(a.$t("label.unavailable_content")),1)])])])):(r(),f("div",R,[(r(!0),f(I,null,N(e.modules,(s,V)=>(r(),f("div",{key:V,class:"col-lg-3 col-md-4 col-sm-6 col-xs-12 q-pa-sm q-pt-none q-mt-none"},[l(y,{style:{height:"100%"}},{default:i(()=>[s.icon&&s.icon.startsWith("icon:")?(r(),u(h,{key:0,name:s.icon.substring(5),size:"160px",style:{width:"100%","margin-top":"5px"}},null,8,["name"])):(r(),u(k,{key:1,src:e.api.multimedia(s.icon),height:"160px",fit:"contain",style:{"margin-top":"5px"}},{error:i(()=>t[4]||(t[4]=[n("img",{src:Q,style:{width:"100%",height:"160px","margin-top":"5px","object-fit":"contain"},alt:""},null,-1)])),_:2},1032,["src"])),l(g,null,{default:i(()=>[l(j,{fab:"",glossy:"",color:"teal",icon:"send",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},disable:e.project.isActive!=="Y"||s.isActive!=="Y",onClick:$=>_.on_open_page(s)},{default:i(()=>[l(x,null,{default:i(()=>[b(d(a.$t("label.open")),1)]),_:1})]),_:2},1032,["disable","onClick"]),n("div",Z,[n("div",H,[l(h,{name:"radio_button_checked",color:s.isActive==="Y"?"positive":"negative"},null,8,["color"]),b(" "+d(s.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),t[5]||(t[5]=n("div",{class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},null,-1))])]),_:2},1024),l(g,{class:"q-pt-none"},{default:i(()=>[n("div",J,d(s.name),1),n("div",K,d(s.description),1)]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1})}const de=z(B,[["render",X]]);export{de as default};
