import{_ as g,Y as n,$ as p,r as i,Z as h,a0 as c,aa as w,aj as b,f as l,a4 as t,a5 as k,a3 as x,ah as _,E as m}from"./index-3Ds9K3sY.js";import{Q as f}from"./QForm-DrU6uDMp.js";const V={setup(){return{util:n,uix:p,username:i(null),password:i(null),is_show_login:i(!1),is_in_progress:i(!1),is_show_password:i(!1)}},methods:{on_login_click(){let o=this,s=o.username;if(!(s&&s.length>0))return p.error("error.required","label.username"),!1;let d=o.password;if(!(d&&d.length>0))return p.error("error.required","label.password"),!1;o.is_in_progress=!0,h.call({path:"/login",method:"post",params:{username:s,password:d},onFinish(){o.is_in_progress=!1},onSuccess(e,a){if(e=n.isObject(e)?e:{},a=n.isObject(a)?a:{},n.isString(e.authorization)){let r=c.auth();r.token=e.authorization,c.auth(r)}n.isObject(e.account)&&c.user(e.account),n.isObject(a.config)&&c.config(a.config),o.$router.push({path:"/"})}})}}},q={class:"flex flex-center q-mt-xl"},y={class:"login-form text-center"};function S(o,s,d,e,a,r){return x(),w("div",q,[b("div",y,[l(f,{class:"q-mt-lg",onSubmit:r.on_login_click},{default:t(()=>[l(_,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=u=>e.username=u),class:"q-mb-md",type:"text",placeholder:o.$t("label.username"),rounded:"",outlined:""},{prepend:t(()=>[l(m,{name:"account_box"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["onSubmit"]),l(f,{onSubmit:r.on_login_click},{default:t(()=>[l(_,{modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=u=>e.password=u),class:"q-mb-md",type:e.is_show_password?"text":"password",placeholder:o.$t("label.password"),rounded:"",outlined:""},{prepend:t(()=>[l(m,{name:"lock"})]),append:t(()=>[l(m,{name:e.is_show_password?"visibility":"visibility_off",onClick:s[1]||(s[1]=u=>e.is_show_password=!e.is_show_password)},null,8,["name"])]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["onSubmit"]),l(k,{"no-caps":"",ripple:"",color:"primary",onClick:r.on_login_click,loading:e.is_in_progress,label:o.$t("label.login")},null,8,["onClick","loading","label"])])])}const Q=g(V,[["render",S]]);export{Q as default};
