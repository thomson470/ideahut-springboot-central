import{Q as x}from"./QTooltip-CbCntXZw.js";import{_ as z,Z as m,$ as w,r as c,a4 as r,a2 as p,a5 as o,f as s,an as _,ao as y,C as q,a6 as j,a7 as f,a8 as d,ac as h,G as b,ae as n,ak as C,aa as A,F as I,ad as N}from"./index-G1u9Lejy.js";import{Q as k}from"./QImg-CTAdQaQ4.js";import{Q as Y}from"./QSelect-C3g-BVo1.js";import{Q as D}from"./QForm-CX1M49Px.js";import{_ as Q,Q as S}from"./Project-CDkXb5la.js";import{C as U}from"./ClosePopup-CT9nyDbK.js";import"./format-ytY8laSO.js";import"./TouchPan-Bp6kdtwJ.js";let t;const B={props:["parameters"],setup(){return{util:m,api:w,initialized:c(!1),project:c({}),page:c({value:1,size:18,min:1,max:3}),order:c("name"),search:c(null),modules:c([]),loading:c(!1),sorts:c([{label:"Name (Asc)",value:"name"},{label:"Name (Desc)",value:"-name"},{label:"Date (Asc)",value:"createdOn"},{label:"Date (Desc)",value:"-createdOn"}])}},created(){t=this;let a=m.isObject(t.parameters)?t.parameters:{};t.project=m.isObject(a.project)?a.project:{},t.get_modules()},methods:{get_modules(){t.loading=!0,w.call({path:"/modules",method:"post",params:{projectId:t.project.projectId,index:t.page.value,size:t.page.size,order:t.order,search:t.search},onFinish(){t.loading=!1,t.initialized=!0},onSuccess(a){let l=1,u=1,e=[];m.isObject(a)&&(m.isNumber(a.index)&&(l=a.index-1,l<1&&(l=1)),u=l+2,e=m.isArray(a.data)?a.data:[],e.length<t.page.size&&(u=t.page.value));let v=t.page;v.min=l,v.max=u,t.modules=e}})},on_update_page(a){t.page.value=a,t.get_modules()},on_sort_update(a){t.order=a,t.get_modules()},on_open_page(a){let l=new URL(window.location.href),u=l.protocol+"//"+l.hostname+(l.port!==80&&l.port!==443?":"+l.port:"")+m.webPath()+"/redirect?projectId="+t.project.projectId+"&moduleId="+a.moduleId;window.open(u,"_blank")}}},O={key:0,class:"col-3"},F={class:"text-caption"},P={class:"text-h5"},L={class:"text-body2 text-grey"},T={class:"row q-pa-sm justify-end"},W={key:0},E={class:"flex flex-center"},G={class:"login-form text-center"},M={class:"text-h6"},R={key:1,class:"row q-pa-sm",style:{"max-height":"58vh","overflow-y":"scroll"}},Z={class:"row no-wrap items-center"},H={class:"col text-caption q-pt-md"},J={class:"text-subtitle1"},K={class:"text-caption text-grey ellipsis-text lines4"};function X(a,l,u,e,v,g){return r(),p(y,null,{default:o(()=>[s(_,{class:"q-pa-xs"},{default:o(()=>[s(y,null,{default:o(()=>[q((r(),p(j,{class:"absolute",flat:"",round:"",glossy:"",icon:"close",color:"red",style:{top:"0px",right:"0px","z-index":"99"}},{default:o(()=>[s(x,null,{default:o(()=>[f(d(a.$t("label.close")),1)]),_:1})]),_:1})),[[U]]),s(_,{horizontal:""},{default:o(()=>[e.project.icon&&e.project.icon.startsWith("icon:")?(r(),h("div",O,[s(b,{name:e.project.icon.substring(5),size:"200px",style:{width:"100%"}},null,8,["name"])])):(r(),p(k,{key:1,class:"col-3",src:e.api.multimedia(e.project.icon),height:"200px",fit:"fill"},{error:o(()=>l[3]||(l[3]=[n("img",{src:Q,style:{width:"100%",height:"200px","object-fit":"contain"},alt:""},null,-1)])),_:1},8,["src"])),s(_,null,{default:o(()=>[n("div",F,[s(b,{name:"radio_button_checked",color:e.project.isActive==="Y"?"positive":"negative"},null,8,["color"]),f(" "+d(e.project.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),n("div",P,d(e.project.name),1),n("div",L,d(e.project.description),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(_,{class:"q-pa-xs"},{default:o(()=>[n("div",T,[s(Y,{modelValue:e.order,"onUpdate:modelValue":[l[0]||(l[0]=i=>e.order=i),g.on_sort_update],label:a.$t("label.sort"),options:e.sorts,disable:e.loading,"option-value":"value","option-label":"label",borderless:"",dense:"","emit-value":"","map-options":"",class:"q-mr-sm"},null,8,["modelValue","label","options","disable","onUpdate:modelValue"]),s(D,{onSubmit:g.get_modules,class:"q-mr-sm"},{default:o(()=>[s(C,{modelValue:e.search,"onUpdate:modelValue":l[1]||(l[1]=i=>e.search=i),label:a.$t("label.search"),disable:e.loading,outlined:"",dense:"",clearable:""},{append:o(()=>[s(j,{round:"",dense:"",glossy:"",icon:"search",onClick:g.get_modules},{default:o(()=>[s(x,null,{default:o(()=>[f(d(a.$t("label.search")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","label","disable"])]),_:1},8,["onSubmit"]),e.modules.length===e.page.size||e.page.value>1?(r(),p(S,{key:0,modelValue:e.page.value,"onUpdate:modelValue":[l[2]||(l[2]=i=>e.page.value=i),g.on_update_page],"icon-prev":"arrow_back_ios","icon-next":"arrow_forward_ios","direction-links":"",min:e.page.min,max:e.page.max,disable:e.loading},null,8,["modelValue","min","max","disable","onUpdate:modelValue"])):A("",!0)]),e.initialized&&!e.modules?.length?(r(),h("div",W,[n("div",E,[n("div",G,[s(b,{name:"mood_bad",color:"deep-orange-11",size:"200px"}),n("div",M,d(a.$t("label.unavailable_content")),1)])])])):(r(),h("div",R,[(r(!0),h(I,null,N(e.modules,(i,V)=>(r(),p(y,{key:V,class:"col-lg-3 col-md-4 col-sm-6 col-xs-12 q-pa-xs q-mb-md"},{default:o(()=>[i.icon&&i.icon.startsWith("icon:")?(r(),p(b,{key:0,name:i.icon.substring(5),size:"160px",style:{width:"100%"}},null,8,["name"])):(r(),p(k,{key:1,src:e.api.multimedia(i.icon),height:"160px",fit:"fill"},{error:o(()=>l[4]||(l[4]=[n("img",{src:Q,style:{width:"100%",height:"160px","object-fit":"contain"},alt:""},null,-1)])),_:2},1032,["src"])),s(_,null,{default:o(()=>[s(j,{fab:"",glossy:"",color:"teal",icon:"send",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},disable:e.project.isActive!=="Y"||i.isActive!=="Y",onClick:$=>g.on_open_page(i)},{default:o(()=>[s(x,null,{default:o(()=>[f(d(a.$t("label.open")),1)]),_:1})]),_:2},1032,["disable","onClick"]),n("div",Z,[n("div",H,[s(b,{name:"radio_button_checked",color:i.isActive==="Y"?"positive":"negative"},null,8,["color"]),f(" "+d(i.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),l[5]||(l[5]=n("div",{class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},null,-1))])]),_:2},1024),s(_,{class:"q-pt-none"},{default:o(()=>[n("div",J,d(i.name),1),n("div",K,d(i.description),1)]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1})}const de=z(B,[["render",X]]);export{de as default};
