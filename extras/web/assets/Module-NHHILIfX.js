import{Q as v}from"./QTooltip-DTsmNrTK.js";import{_ as V,Y as p,Z as y,r as m,a3 as r,a1 as u,a4 as t,f as o,al as _,am as x,B as z,a5 as j,a6 as f,a7 as d,aa as h,E as g,aj as i,ah as q,a8 as C,F as A,ab as I}from"./index-3Ds9K3sY.js";import{Q as w}from"./QImg-CPhRzbPa.js";import{Q as Y}from"./QSelect-ybIcc9Im.js";import{Q as N}from"./QForm-DrU6uDMp.js";import{_ as k,Q as B}from"./Project-CVupzOjs.js";import{C as D}from"./ClosePopup-Cf-fI5V5.js";import"./format-BYB7LI8Y.js";const S={props:["parameters"],setup(){return{util:p,api:y,initialized:m(!1),project:m({}),page:m({value:1,size:18,min:1,max:3}),order:m("name"),search:m(null),modules:m([]),loading:m(!1),sorts:m([{label:"Name (Asc)",value:"name"},{label:"Name (Desc)",value:"-name"},{label:"Date (Asc)",value:"createdOn"},{label:"Date (Desc)",value:"-createdOn"}])}},created(){let a=this,l=p.isObject(a.parameters)?a.parameters:{};a.project=p.isObject(l.project)?l.project:{},a.get_modules()},methods:{get_modules(){let a=this;a.loading=!0,y.call({path:"/modules",method:"post",params:{projectId:a.project.projectId,index:a.page.value,size:a.page.size,order:a.order,search:a.search},onFinish(){a.loading=!1,a.initialized=!0},onSuccess(l){let n=1,e=1,b=[];p.isObject(l)&&(p.isNumber(l.index)&&(n=l.index-1,n<1&&(n=1)),e=n+2,b=p.isArray(l.data)?l.data:[],b.length<a.page.size&&(e=a.page.value));let c=a.page;c.min=n,c.max=e,a.modules=b}})},on_update_page(a){let l=this;l.page.value=a,l.get_modules()},on_sort_update(a){let l=this;l.order=a,l.get_modules()},on_open_page(a){let l=this,n=new URL(window.location.href),e=n.protocol+"//"+n.hostname+(n.port!==80&&n.port!==443?":"+n.port:"")+p.webPath()+"/redirect?projectId="+l.project.projectId+"&moduleId="+a.moduleId;window.open(e,"_blank")}}},U={key:0,class:"col-3"},O={class:"text-caption"},F={class:"text-h5"},P={class:"text-body2 text-grey"},E={class:"row q-pa-sm justify-end"},L={key:0},T={class:"flex flex-center"},W={class:"login-form text-center"},M={class:"text-h6"},R={key:1,class:"row q-pa-sm",style:{"max-height":"58vh","overflow-y":"scroll"}},Z={class:"row no-wrap items-center"},G={class:"col text-caption q-pt-md"},H={class:"text-subtitle1"},J={class:"text-caption text-grey ellipsis-text lines4"};function K(a,l,n,e,b,c){return r(),u(x,null,{default:t(()=>[o(_,{class:"q-pa-xs"},{default:t(()=>[o(x,null,{default:t(()=>[z((r(),u(j,{class:"absolute",flat:"",round:"",glossy:"",icon:"close",color:"red",style:{top:"0px",right:"0px","z-index":"99"}},{default:t(()=>[o(v,null,{default:t(()=>[f(d(a.$t("label.close")),1)]),_:1})]),_:1})),[[D]]),o(_,{horizontal:""},{default:t(()=>[e.project.icon&&e.project.icon.startsWith("icon:")?(r(),h("div",U,[o(g,{name:e.project.icon.substring(5),size:"200px",style:{width:"100%"}},null,8,["name"])])):(r(),u(w,{key:1,class:"col-3",src:e.api.multimedia(e.project.icon),height:"200px",fit:"fill"},{error:t(()=>l[3]||(l[3]=[i("img",{src:k,style:{width:"100%",height:"200px","object-fit":"contain"},alt:""},null,-1)])),_:1},8,["src"])),o(_,null,{default:t(()=>[i("div",O,[o(g,{name:"radio_button_checked",color:e.project.isActive==="Y"?"positive":"negative"},null,8,["color"]),f(" "+d(e.project.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),i("div",F,d(e.project.name),1),i("div",P,d(e.project.description),1)]),_:1})]),_:1})]),_:1})]),_:1}),o(_,{class:"q-pa-xs"},{default:t(()=>[i("div",E,[o(Y,{modelValue:e.order,"onUpdate:modelValue":[l[0]||(l[0]=s=>e.order=s),c.on_sort_update],label:a.$t("label.sort"),options:e.sorts,disable:e.loading,"option-value":"value","option-label":"label",borderless:"",dense:"","emit-value":"","map-options":"",class:"q-mr-sm"},null,8,["modelValue","label","options","disable","onUpdate:modelValue"]),o(N,{onSubmit:c.get_modules,class:"q-mr-sm"},{default:t(()=>[o(q,{modelValue:e.search,"onUpdate:modelValue":l[1]||(l[1]=s=>e.search=s),label:a.$t("label.search"),disable:e.loading,outlined:"",dense:"",clearable:""},{append:t(()=>[o(j,{round:"",dense:"",glossy:"",icon:"search",onClick:c.get_modules},{default:t(()=>[o(v,null,{default:t(()=>[f(d(a.$t("label.search")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","label","disable"])]),_:1},8,["onSubmit"]),e.modules.length===e.page.size||e.page.value>1?(r(),u(B,{key:0,modelValue:e.page.value,"onUpdate:modelValue":[l[2]||(l[2]=s=>e.page.value=s),c.on_update_page],"icon-prev":"arrow_back_ios","icon-next":"arrow_forward_ios","direction-links":"",min:e.page.min,max:e.page.max,disable:e.loading},null,8,["modelValue","min","max","disable","onUpdate:modelValue"])):C("",!0)]),e.initialized&&!e.modules?.length?(r(),h("div",L,[i("div",T,[i("div",W,[o(g,{name:"mood_bad",color:"deep-orange-11",size:"200px"}),i("div",M,d(a.$t("label.unavailable_content")),1)])])])):(r(),h("div",R,[(r(!0),h(A,null,I(e.modules,(s,Q)=>(r(),u(x,{key:Q,class:"col-lg-3 col-md-4 col-sm-6 col-xs-12 q-pa-xs q-mb-md"},{default:t(()=>[s.icon&&s.icon.startsWith("icon:")?(r(),u(g,{key:0,name:s.icon.substring(5),size:"160px",style:{width:"100%"}},null,8,["name"])):(r(),u(w,{key:1,src:e.api.multimedia(s.icon),height:"160px",fit:"fill"},{error:t(()=>l[4]||(l[4]=[i("img",{src:k,style:{width:"100%",height:"160px","object-fit":"contain"},alt:""},null,-1)])),_:2},1032,["src"])),o(_,null,{default:t(()=>[o(j,{fab:"",glossy:"",color:"teal",icon:"send",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},disable:e.project.isActive!=="Y"||s.isActive!=="Y",onClick:X=>c.on_open_page(s)},{default:t(()=>[o(v,null,{default:t(()=>[f(d(a.$t("label.open")),1)]),_:1})]),_:2},1032,["disable","onClick"]),i("div",Z,[i("div",G,[o(g,{name:"radio_button_checked",color:s.isActive==="Y"?"positive":"negative"},null,8,["color"]),f(" "+d(s.isActive==="Y"?a.$t("label.active"):a.$t("label.inactive")),1)]),l[5]||(l[5]=i("div",{class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},null,-1))])]),_:2},1024),o(_,{class:"q-pt-none"},{default:t(()=>[i("div",H,d(s.name),1),i("div",J,d(s.description),1)]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1})}const ne=V(S,[["render",K]]);export{ne as default};
